const app={cards:document.querySelectorAll(".bg-img"),videos:document.querySelectorAll("video"),timeouts:{playing:[],paused:[]},reps:1,init:function(){app.videosLoaded=Array(app.videos.length).fill(!1),app.timeouts.playing=Array(app.videos.length).fill(-1),app.timeouts.paused=Array(app.videos.length).fill(1),app.intervals=Array(app.videos.length).fill(null),app.fadeInCards(),app.listenForScroll(),app.scrollTop(),app.activeLinks(),app.loadVideos(),this.reps=1e3*this.reps},fadeInCards:function(){const o=window.innerHeight-12;app.cards.forEach((e,t)=>{var a;e.dataset.bg&&e.getBoundingClientRect().top<=o&&((a=new Image).src=e.dataset.bg,a.addEventListener("load",()=>{e.style.backgroundImage="url("+e.dataset.bg+")",e.classList.add("fade-in")}))}),document.querySelectorAll("video").forEach((e,t)=>{app.playVideo(e)})},loadVideos:function(){document.querySelectorAll("video").forEach((t,a)=>{t.addEventListener("loadeddata",e=>{app.playVideo(t,a)}),t.closest(".contributor-grid-card").addEventListener("mouseover",e=>{app.playVideo(t,a),e.target.addEventListener("mouseout",()=>{app.pauseVideo(t,a)})})})},playVideo:function(e,t){e.classList.remove("pause"),e.play(),null==app.intervals[t]&&(app.intervals[t]=setInterval(()=>{app.videoPlaying(e)||(e.classList.add("pause"),clearInterval(app.intervals[t]),app.intervals[t]=null)},e.duration+1e3))},videoPlaying:function(e){return 2<e.readyState&&0<e.currentTime&&!e.paused&&!e.ended},pauseVideo:function(e,t){e.removeAttribute("loop"),e.pause(),setTimeout(()=>{e.classList.add("pause")},e.duration*this.reps+600)},listenForScroll:function(){window.addEventListener("scroll",()=>{app.fadeInCards()})},scrollTop:function(){document.querySelector('[href="#header"]').addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})},activeLinks:function(){const a=window.location.href.replace(window.location.origin,"");document.querySelectorAll(".nav-link").forEach(e=>{var t=e.href.replace(window.location.origin,"");!a.indexOf(t)||0!=a.indexOf(t)&&"/"!=t||e.classList.add("active")})}};app.init(),function(){"use strict";[].forEach.call(document.querySelectorAll(".search-form"),a=>{a.addEventListener("submit",function(e){var t=a.querySelector("input");t.value.length<1&&(e.preventDefault(),t.focus())})});[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(e){return new bootstrap.Popover(e,{trigger:"focus"})});const e=document.querySelector("#navbar");document.querySelector("#toggle-label");document.querySelector("#hi").addEventListener("change",function(){this.checked?(this.setAttribute("disabled",!0),e.classList.add("show"),setTimeout(()=>{this.removeAttribute("disabled")},500)):(this.removeAttribute("disabled"),e.classList.remove("show"))});const t=new URL(window.location.href).pathname;document.querySelectorAll("#menu-global-nav li a").forEach(e=>{new URL(e.href).pathname==t&&e.classList.add("active")})}();